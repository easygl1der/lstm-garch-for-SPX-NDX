# R²与QLIKE损失函数对比说明

## R²（决定系数）的局限性

### 公式
$$R^2 = 1 - \frac{\sum_{i=1}^{n}(y_i - \hat{y}_i)^2}{\sum_{i=1}^{n}(y_i - \bar{y})^2}$$

### 问题
1. ❌ **对异常值过度敏感** - 一个极端误差会严重影响R²
2. ❌ **假设正态分布** - 但波动率遵循对数正态分布
3. ❌ **平等对待高估/低估** - 在风险管理中，低估波动率比高估更危险
4. ❌ **可能为负** - 当模型比平均值还差时，R²<0失去意义

---

## QLIKE（Quasi Log-Likelihood）的优势

### 公式
$$\text{QLIKE}(\sigma^2, \hat{\sigma}^2) = \log(\hat{\sigma}^2) + \frac{\sigma^2}{\hat{\sigma}^2}$$

### 优点
1. ✅ **专为波动率设计** - 基于对数似然，符合金融理论
2. ✅ **非对称惩罚** - 低估波动率的惩罚更重（$\sigma^2/\hat{\sigma}^2$项）
3. ✅ **对数正态分布** - 与波动率的统计特性一致
4. ✅ **量纲不变** - 对不同市场/资产具有可比性
5. ✅ **行业标准** - GARCH模型和风险管理的黄金标准

---

## 为什么低估波动率更危险？

在金融风险管理中：
- **低估波动率** → 低估VaR → **资本储备不足** → 潜在灾难性损失 ⚠️
- **高估波动率** → 高估VaR → 资本储备过多 → 仅影响收益率 ✓

**QLIKE的非对称性正好符合这一需求！**

---

## 学术依据

### 重要文献
1. **Hansen & Lunde (2005)**: "A Forecast Comparison of Volatility Models: Does Anything Beat a GARCH(1,1)?"
   - 提出QLIKE作为波动率预测的标准评估指标
   
2. **Patton (2011)**: "Volatility Forecast Comparison Using Imperfect Volatility Proxies"
   - 证明QLIKE在实际波动率预测中的稳健性
   
3. **Bollerslev et al. (1994)**: GARCH模型的损失函数理论基础

---

## 实践建议

### 对于波动率预测：
1. ✅ **训练阶段** - 使用QLIKE损失函数
2. ✅ **评估阶段** - 报告QLIKE得分（而非仅R²）
3. ✅ **生产环境** - QLIKE优化的模型更适合风险管理
4. ⚠️ **可选** - 同时报告R²和MSE用于与传统方法对比

---

## QLIKE vs MSE 示例

假设真实波动率 σ² = 0.01，两个模型的预测：

| 模型 | 预测值 | MSE | QLIKE | 风险评估 |
|------|--------|-----|-------|----------|
| A | 0.005 | 0.000025 | -4.605 | ⚠️ 严重低估风险 |
| B | 0.015 | 0.000025 | -3.807 | ✓ 保守估计，更安全 |

**MSE相同**，但**QLIKE能区分**！模型B虽然误差相同，但更保守，在风险管理中更安全。

---

## 结论

对于波动率预测：
- **R²** - 仅作为参考指标
- **QLIKE** - 主要优化目标和评估标准
- **原因** - 符合金融理论，更适合风险管理实践



